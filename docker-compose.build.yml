# Luanti Server Docker Compose - For Developers (Build Locally)
# Run: docker-compose -f docker-compose.build.yml up -d --build
#
# First-time deployment with admin setup:
#   ADMIN_PASSWORD=yourpassword docker-compose -f docker-compose.build.yml up -d --build
#
# Optional: ADMIN_USER=customadmin (defaults to "admin")

services:
  mineclonia:
    build:
      context: .
      dockerfile: Dockerfile
    image: luanti-home-server:latest
    container_name: luanti_mineclonia
    restart: unless-stopped
    stdin_open: true
    tty: true
    ports:
      - "30000:30000/udp"
    volumes:
      - ./worlds/mineclonia:/luanti/luanti/worlds/world
      - ./config/mineclonia.conf:/luanti/luanti/config/luanti.conf
    environment:
      - GAME_TO_PLAY=mineclonia
      - ADMIN_PASSWORD=${ADMIN_PASSWORD:-}
      - ADMIN_USER=${ADMIN_USER:-admin}

  voxelibre:
    build:
      context: .
      dockerfile: Dockerfile
    image: luanti-home-server:latest
    container_name: luanti_voxelibre
    restart: unless-stopped
    stdin_open: true
    tty: true
    ports:
      - "30001:30000/udp"
    volumes:
      - ./worlds/voxelibre:/luanti/luanti/worlds/world
      - ./config/voxelibre.conf:/luanti/luanti/config/luanti.conf
    environment:
      - GAME_TO_PLAY=voxelibre
      - ADMIN_PASSWORD=${ADMIN_PASSWORD:-}
      - ADMIN_USER=${ADMIN_USER:-admin}
